<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Flight | Persaud Airlines</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              gold: '#D4AF37',
              dark: '#111827',
            }
          }
        }
      }
    </script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
      .booking-bg {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://raw.githubusercontent.com/Persaud-Airlines/-/refs/heads/main/aircraft%202.png');
        background-size: cover;
        background-position: center;
      }
      .gold-hover:hover {
        color: #D4AF37;
        transition: all 0.3s ease;
      }
      .border-gold {
        border-color: #D4AF37;
      }
      input:focus, select:focus, textarea:focus {
        border-color: #D4AF37 !important;
        box-shadow: 0 0 0 1px #D4AF37 !important;
      }
    </style>
</head>
<body class="bg-dark text-white font-sans">
  <!-- Navigation -->
  <nav class="fixed w-full bg-dark bg-opacity-90 z-50 border-b border-gold">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <a href="index.html" class="text-gold text-2xl font-bold">PERSAUD AIRLINES</a>
        </div>
        <div class="hidden md:flex items-center space-x-8">
          <a href="index.html" class="text-white hover:text-gold transition duration-300">Home</a>
          <a href="map.html" class="text-white hover:text-gold transition duration-300">Our Base</a>
          <a href="about.html" class="text-white hover:text-gold transition duration-300">About</a>
          <a href="booking.html" class="bg-gold text-dark px-4 py-2 rounded-md hover:bg-opacity-90 transition duration-300">Book Now</a>
        </div>
        <div class="md:hidden flex items-center">
          <button id="menu-btn" class="text-white focus:outline-none">
            <i data-feather="menu"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden bg-dark pb-4 border-t border-gold">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
        <a href="index.html" class="block px-3 py-2 text-white hover:text-gold">Home</a>
        <a href="map.html" class="block px-3 py-2 text-white hover:text-gold">Our Base</a>
        <a href="about.html" class="block px-3 py-2 text-white hover:text-gold">About</a>
        <a href="booking.html" class="block px-3 py-2 text-gold font-medium">Book Now</a>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="booking-bg pt-32 pb-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-6 text-gold" data-aos="fade-up">BOOK YOUR FLIGHT</h1>
      <p class="text-xl max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="100">Complete the form below to request a private charter flight. Our team will contact you within 24 hours to confirm your booking.</p>
    </div>
  </section>

  <!-- Booking Form -->
  <section class="py-20">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="bg-gray-900 rounded-lg border border-gold p-8" data-aos="fade-up">
        <form id="booking-form">
          <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div>
              <label for="departure" class="block text-sm font-medium mb-2">Departure Airport</label>
              <input type="text" id="departure" name="departure" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" placeholder="CYSN (YCM) or other" required>
            </div>
            <div>
              <label for="destination" class="block text-sm font-medium mb-2">Destination Airport</label>
              <input type="text" id="destination" name="destination" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" placeholder="Enter airport code or city" required>
            </div>
          </div>
          
          <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div>
              <label for="departure-date" class="block text-sm font-medium mb-2">Departure Date</label>
              <input type="date" id="departure-date" name="departure-date" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" required>
            </div>
            <div>
              <label for="return-date" class="block text-sm font-medium mb-2">Return Date (if round trip)</label>
              <input type="date" id="return-date" name="return-date" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none">
            </div>
          </div>
          
          <!-- Passenger Section -->
          <div class="mb-8">
            <label class="block text-sm font-medium mb-2">Passengers</label>
            <div class="space-y-4 bg-gray-800 p-4 rounded-md border border-gray-700">
              <!-- Adults -->
              <div class="flex items-center justify-between">
                <span>Adults (18+)</span>
                <div class="flex items-center space-x-2">
                  <button type="button" class="bg-gray-700 text-white px-2 py-1 rounded minus-btn" data-type="adult">-</button>
                  <span id="adult-count">1</span>
                  <button type="button" class="bg-gray-700 text-white px-2 py-1 rounded plus-btn" data-type="adult">+</button>
                </div>
              </div>
              <!-- Children -->
              <div class="flex items-center justify-between">
                <span>Children (3-17)</span>
                <div class="flex items-center space-x-2">
                  <button type="button" class="bg-gray-700 text-white px-2 py-1 rounded minus-btn" data-type="child">-</button>
                  <span id="child-count">0</span>
                  <button type="button" class="bg-gray-700 text-white px-2 py-1 rounded plus-btn" data-type="child">+</button>
                </div>
              </div>
              <!-- Infants -->
              <div class="flex items-center justify-between">
                <span>Infants (0-2)</span>
                <div class="flex items-center space-x-2">
                  <button type="button" class="bg-gray-700 text-white px-2 py-1 rounded minus-btn" data-type="infant">-</button>
                  <span id="infant-count">0</span>
                  <button type="button" class="bg-gray-700 text-white px-2 py-1 rounded plus-btn" data-type="infant">+</button>
                </div>
              </div>
              <!-- Passenger details -->
              <div id="passenger-details" class="mt-4 space-y-4"></div>
            </div>
          </div>

          <div class="mb-8">
            <label for="special-requests" class="block text-sm font-medium mb-2">Special Requests</label>
            <textarea id="special-requests" name="special-requests" rows="4" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" placeholder="Catering, ground transportation, pet policy, etc."></textarea>
          </div>
          
          <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div>
              <label for="name" class="block text-sm font-medium mb-2">Primary Passenger Full Name</label>
              <input type="text" id="name" name="name" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" required>
            </div>
            <div>
              <label for="email" class="block text-sm font-medium mb-2">Primary Email Address</label>
              <input type="email" id="email" name="email" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" required>
            </div>
          </div>
          
          <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div>
              <label for="phone" class="block text-sm font-medium mb-2">Primary Phone Number</label>
              <input type="tel" id="phone" name="phone" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" required>
            </div>
            <div>
              <label for="company" class="block text-sm font-medium mb-2">Company (if applicable)</label>
              <input type="text" id="company" name="company" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none">
            </div>
          </div>
          
          <div class="flex items-center mb-8">
            <input id="terms" name="terms" type="checkbox" class="h-4 w-4 text-gold focus:ring-gold border-gray-700 rounded bg-gray-800" required>
            <label for="terms" class="ml-2 block text-sm text-gray-300">
              I agree to the <a href="#" class="text-gold hover:underline">terms and conditions</a> and understand this is a booking request, not a confirmed reservation.
            </label>
          </div>
          
          <button type="submit" class="w-full bg-gold text-dark py-3 px-4 rounded-md font-semibold hover:bg-opacity-90 transition duration-300">Submit Booking Request</button>
        </form>
      </div>
    </div>
  </section>
    <a href="admin.html" class="text-gray-900 hover:text-gold transition duration-100">admin panel - view bookings</a></li>
  </section>

  <!-- Booking Process & Footer sections remain unchanged -->
<script>
  AOS.init({duration:800,easing:'ease-in-out',once:true});
  feather.replace();
  const menuBtn=document.getElementById('menu-btn');
  const mobileMenu=document.getElementById('mobile-menu');
  menuBtn.addEventListener('click',()=>{mobileMenu.classList.toggle('hidden');});

  // Passenger JS
  const passengerDetails = document.getElementById('passenger-details');
  const counts = { adult:1, child:0, infant:0 };
  function updatePassengerDetails(){
    passengerDetails.innerHTML='';
    ['adult','child','infant'].forEach(type=>{
      for(let i=1;i<=counts[type];i++){
        const div=document.createElement('div');
        div.classList.add('grid','md:grid-cols-2','gap-4','bg-gray-700','p-3','rounded');
        div.innerHTML=`
          <div>
            <label class="block text-sm font-medium mb-1">${type.charAt(0).toUpperCase()+type.slice(1)} ${i} Full Legal Name (as on documents)</label>
            <input type="text" name="${type}-name-${i}" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" required>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">${type.charAt(0).toUpperCase()+type.slice(1)} ${i} Age (at time of departure)</label>
            <input type="number" name="${type}-age-${i}" min="0" max="120" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md focus:outline-none" required>
          </div>
        `;
        passengerDetails.appendChild(div);
      }
    });
  }
  document.querySelectorAll('.plus-btn').forEach(btn=>btn.addEventListener('click',()=>{counts[btn.dataset.type]++;document.getElementById(`${btn.dataset.type}-count`).textContent=counts[btn.dataset.type];updatePassengerDetails();}));
  document.querySelectorAll('.minus-btn').forEach(btn=>btn.addEventListener('click',()=>{if(counts[btn.dataset.type]>(btn.dataset.type==='adult'?1:0)){counts[btn.dataset.type]--;document.getElementById(`${btn.dataset.type}-count`).textContent=counts[btn.dataset.type];updatePassengerDetails();}}));
  updatePassengerDetails();
</script>

<!-- Firebase Integration -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCA4gFSAoD0_EKX8Na7hx0dKv44XBecSLk",
    authDomain: "persaud-airlines.firebaseapp.com",
    projectId: "persaud-airlines",
    storageBucket: "persaud-airlines.appspot.com",
    messagingSenderId: "974190271242",
    appId: "1:974190271242:web:da5aa18403b258d546f8f3"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const bookingForm = document.getElementById('booking-form');
  bookingForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Gather passenger details dynamically
    const passengerArray = [];
    ['adult','child','infant'].forEach(type=>{
      for(let i=1;i<=counts[type];i++){
        passengerArray.push({
          type: type,
          name: bookingForm[`${type}-name-${i}`].value,
          age: bookingForm[`${type}-age-${i}`].value
        });
      }
    });

    const formData = {
      departure: bookingForm.departure.value,
      destination: bookingForm.destination.value,
      departureDate: bookingForm['departure-date'].value,
      returnDate: bookingForm['return-date'].value,
      passengers: passengerArray,
      specialRequests: bookingForm['special-requests'].value,
      name: bookingForm.name.value,
      email: bookingForm.email.value,
      phone: bookingForm.phone.value,
      company: bookingForm.company.value,
      termsAccepted: bookingForm.terms.checked,
      submittedAt: new Date().toISOString()
    };

    try {
      await addDoc(collection(db, "bookings"), formData);
      alert("Thank you! Your booking request has been submitted.");
      bookingForm.reset();
      counts.adult=1; counts.child=0; counts.infant=0;
      updatePassengerDetails();
    } catch (error) {
      console.error("Error submitting booking:", error);
      alert("There was an issue submitting your booking. Please try again.");
    }
  });
</script>
</body>
</html>
